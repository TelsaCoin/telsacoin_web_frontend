<div class="episode-container">
    <div class="podcast-card" *ngIf="!episodeLoading">
        <div class="d-flex align-items-center mb-5">
            <span class="icon icon-arrow-left-1 accenttwo mt-1 pointer" (click)="back()" style="font-size: 18px;"></span>
            <span>
                <h6 class="podcast-name pointer" (click)="redirectToPodcast(episodeData)">{{episodeData.podcast_name}}</h6>
            </span>
        </div>
        <div class="d-flex justify-content-between">
            <div style="width: 50%;">
                <div class="content">
                    <div class="d-flex justify-content-start">
                        <img [src]="episodeData.podcast_image" class="lazyload">
                        <div>
                            <div class="name truncate-overflow">{{episodeData.name}}</div>
                            <div class="author text-truncate mb-3">by {{episodeData.author}}</div>
                            <div class="d-flex flex-wrap">
                                <div class="comment-count duration">
                                    <i class="far fa-clock-o" aria-hidden="true"></i>
                                    <span>{{formatDuration(episodeData.duration)}}</span>
                                </div>
                                <div class="vote-count" *ngIf="episodeData.permlink && !isPaidOut()">
                                    <div class="vote-icon" [ngClass]="{'voted' : episodeData.ifVoted}" style="margin-top: 4px;">
                                        <span class="icon icon-up-circled" *ngIf="!upvoteOngoing" (click)="upvote(episodeData)"></span>
                                        <i class="fas fa-spinner fa-spin" aria-hidden="true" *ngIf="upvoteOngoing"></i>
                                    </div>
                                    <span>{{episodeData.votes}}</span>
                                </div>
                                <div class="comment-count" *ngIf="episodeData.permlink">
                                    <span>{{episodeData.payout_value.replace("HBD", "$")}}</span>
                                </div>
                                <div class="comment-count" *ngIf="episodeData.permlink">
                                    <span class="icon icon-comments-o"></span>
                                    <span>{{episodeData.comments_count}}</span>
                                </div>
                                <div class="comment-count" *ngIf="episodeData.author_hiveusername" (click)="tipAuthor(episodeData)">
                                    <span>Tip Author</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="more-content">
                    <div class="comments-container">
                        <div class="heading mb-4">Comments</div>
                        <div class="comments" *ngIf="episodeData.permlink">
                            <app-comment *ngFor="let c of comments" (refresh)="getComments()" [comment]="c"></app-comment>
                            <app-comment-box (add)="addComment($event)" [isLoading]="isAddingComment"></app-comment-box>
                        </div>
                        <div *ngIf="!episodeData.permlink">
                            <span class="accenttwo"> Comments are enabled only for podcast episodes published on Hive.</span>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width: 45%; margin-left: 5%;">
                <div class="description" [innerHTML]="episodeData.summary" [ngClass]="{'truncate-overflow' : !viewMoreDescription}">
                </div>
                <div class="view-more" (click)="viewMoreDescription = !viewMoreDescription">
                  <span *ngIf="!viewMoreDescription">view more
                  </span>
                  <span *ngIf="viewMoreDescription">view less</span>
                  <span class="icon icon-right-open-mini ml-2"></span>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="episodeLoading">
        <app-loader></app-loader>
    </div>
</div>
